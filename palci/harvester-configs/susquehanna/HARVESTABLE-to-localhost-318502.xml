<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<harvestable uri="http://harvester.folio-dev-us-east-1-1.folio-dev.indexdata.com/harvester/records/harvestables/318502">
    <oaiPmh>
        <allowErrors>false</allowErrors>
        <cacheEnabled>false</cacheEnabled>
        <constantFields></constantFields>
        <contactNotes></contactNotes>
        <currentStatus>RUNNING</currentStatus>
        <description></description>
        <diskRun>false</diskRun>
        <enabled>false</enabled>
        <failedRecordsLogging>CLEAN_DIRECTORY</failedRecordsLogging>
        <harvestImmediately>false</harvestImmediately>
        <id>318502</id>
        <initiallyHarvested>2021-02-08T18:08:32.551Z</initiallyHarvested>
        <json></json>
        <lastHarvestStarted>2021-02-08T18:08:32.551Z</lastHarvestStarted>
        <lastUpdated>2021-02-08T18:08:32.158Z</lastUpdated>
        <laxParsing>false</laxParsing>
        <logLevel>INFO</logLevel>
        <mailAddress></mailAddress>
        <mailLevel>WARN</mailLevel>
        <managedBy></managedBy>
        <maxSavedFailedRecordsPerRun>100</maxSavedFailedRecordsPerRun>
        <maxSavedFailedRecordsTotal>1000</maxSavedFailedRecordsTotal>
        <name>PALCI SI: Susquehanna to localhost</name>
        <openAccess>false</openAccess>
        <overwrite>false</overwrite>
        <retryCount>2</retryCount>
        <retryWait>60</retryWait>
        <scheduleString>10 10 10 6 *</scheduleString>
        <serviceProvider></serviceProvider>
        <storage xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="inventoryStorageEntity">
            <bulkSize>1000</bulkSize>
            <currentStatus>TODO</currentStatus>
            <customClass></customClass>
            <description>Inventory storage accessed locally without SSL</description>
            <enabled>true</enabled>
            <id>301104</id>
            <idAsString>301104</idAsString>
            <json>{&#xD;
    "folioAuthPath": "bl-users/login",&#xD;
    "folioTenant": "palci_si",&#xD;
    "folioUsername": "palci_admin",&#xD;
    "folioPassword": "wZ2lti9kVu9sCK4mXLAjoF0S",&#xD;
    "inventoryUpsertPath": "shared-inventory-upsert-matchkey",&#xD;
    "marcStoragePath": "marc-records"&#xD;
}</json>
            <name>palci_si - Local Okapi by HTTP (upsert API)</name>
            <url>http://okapi:9130/</url>
        </storage>
        <storeOriginal>true</storeOriginal>
        <technicalNotes></technicalNotes>
        <timeout>300</timeout>
        <transformation xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="basicTransformation">
            <description></description>
            <enabled>true</enabled>
            <name>Susquehanna - OAI-PMH to FOLIO Inventory</name>
            <parallel>false</parallel>
            <stepAssociations>
                <id>318401</id>
                <position>1</position>
                <step xsi:type="xmlTransformationStep">
                    <description>PALCI: OAI20-MARC21 XML to FOLIO Instance XML</description>
                    <inputFormat>XML</inputFormat>
                    <name>PALCI: OAI20-MARC21 to Instance XML</name>
                    <outputFormat>XML</outputFormat>
                    <script>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#xD;&lt;xsl:stylesheet&#xD;    version="1.0"&#xD;    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&#xD;    xmlns:marc="http://www.loc.gov/MARC21/slim"&#xD;    xmlns:oai20="http://www.openarchives.org/OAI/2.0/"&gt;&#xD;&#xD;    &lt;xsl:import href="map-relator-to-contributor-type.xsl"/&gt;&#xD;    &#xD;    &lt;xsl:output indent="yes" method="xml" version="1.0" encoding="UTF-8"/&gt;&#xD;    &lt;xsl:template match="/"&gt;&#xD;        &lt;collection&gt;&#xD;            &lt;xsl:apply-templates /&gt;&#xD;        &lt;/collection&gt;&#xD;    &lt;/xsl:template&gt;&#xD;&#xD;    &lt;xsl:template match="oai20:record"&gt;&#xD;      &lt;record&gt;&#xD;        &lt;xsl:choose&gt;&#xD;          &lt;xsl:when test="oai20:header[@status='deleted']"&gt;&#xD;             &lt;xsl:apply-templates/&gt;&#xD;          &lt;/xsl:when&gt;&#xD;          &lt;xsl:otherwise&gt;  &#xD;            &lt;!-- Store the original MARC record to be used by subsequent style sheets --&gt;&#xD;            &lt;original&gt;&#xD;              &lt;record xmlns="http://www.openarchives.org/OAI/2.0/" &#xD;                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" &#xD;                    xsi:schemaLocation="http://www.openarchives.org/OAI/2.0/ http://www.openarchives.org/OAI/2.0/OAI-PMH.xsd"&gt;&#xD;                &lt;xsl:for-each select="@* | node()"&gt;&#xD;                    &lt;xsl:copy-of select="."/&gt;&#xD;                &lt;/xsl:for-each&gt;&#xD;              &lt;/record&gt;            &#xD;            &lt;/original&gt;&#xD;            &lt;xsl:apply-templates/&gt;&#xD;          &lt;/xsl:otherwise&gt;&#xD;        &lt;/xsl:choose&gt;&#xD;      &lt;/record&gt;&#xD;    &lt;/xsl:template&gt;&#xD;&#xD;&#xD;    &lt;!-- If this is an OAI-PMH deletion record --&gt;&#xD;    &lt;xsl:template match="//oai20:header[@status='deleted']"&gt;&#xD;        &lt;delete&gt;&#xD;            &lt;oaiIdentifier&gt;&lt;xsl:value-of select="oai20:identifier"/&gt;&lt;/oaiIdentifier&gt;&#xD;            &lt;identifierTypeIdHere/&gt;&#xD;            &lt;institutionIdHere/&gt;&#xD;        &lt;/delete&gt;&#xD;    &lt;/xsl:template&gt;&#xD;&#xD;    &lt;!-- MARC meta data --&gt;&#xD;    &lt;xsl:template match="//marc:record"&gt;&#xD;&#xD;        &lt;!-- Information needed for storing source record in union catalog context --&gt;&#xD;        &lt;institutionIdHere/&gt;&#xD;        &lt;localIdentifier&gt;&lt;xsl:value-of select="marc:controlfield[@tag='001']" /&gt;&lt;/localIdentifier&gt;&#xD;&#xD;        &lt;!-- Bibliographic record for FOLIO inventory --&gt;&#xD;        &lt;instance&gt;&#xD;            &lt;source&gt;MARC&lt;/source&gt;&#xD;&#xD;            &lt;!-- Instance type ID (resource type) --&gt;&#xD;            &lt;instanceTypeId&gt;&#xD;                &lt;!-- UUIDs for resource types --&gt;&#xD;                &lt;xsl:choose&gt;&#xD;                &lt;xsl:when test="substring(marc:leader,7,1)='a'"&gt;6312d172-f0cf-40f6-b27d-9fa8feaf332f&lt;/xsl:when&gt; &lt;!-- language material : text --&gt;&#xD;                &lt;xsl:when test="substring(marc:leader,7,1)='c'"&gt;497b5090-3da2-486c-b57f-de5bb3c2e26d&lt;/xsl:when&gt; &lt;!-- notated music : notated music --&gt;&#xD;                &lt;xsl:when test="substring(marc:leader,7,1)='d'"&gt;497b5090-3da2-486c-b57f-de5bb3c2e26d&lt;/xsl:when&gt; &lt;!-- manuscript notated music : notated music -&gt; notated music --&gt;&#xD;                &lt;xsl:when test="substring(marc:leader,7,1)='e'"&gt;526aa04d-9289-4511-8866-349299592c18&lt;/xsl:when&gt; &lt;!-- cartographic material : cartographic image --&gt;&#xD;                &lt;xsl:when test="substring(marc:leader,7,1)='f'"&gt;a2c91e87-6bab-44d6-8adb-1fd02481fc4f&lt;/xsl:when&gt; &lt;!-- other --&gt; &lt;!-- manuscript cartographic material : ? --&gt;&#xD;                &lt;xsl:when test="substring(marc:leader,7,1)='g'"&gt;535e3160-763a-42f9-b0c0-d8ed7df6e2a2&lt;/xsl:when&gt; &lt;!-- projected image : still image --&gt;&#xD;                &lt;xsl:when test="substring(marc:leader,7,1)='i'"&gt;9bce18bd-45bf-4949-8fa8-63163e4b7d7f&lt;/xsl:when&gt; &lt;!-- nonmusical sound recording : sounds --&gt;&#xD;                &lt;xsl:when test="substring(marc:leader,7,1)='j'"&gt;3be24c14-3551-4180-9292-26a786649c8b&lt;/xsl:when&gt; &lt;!-- musical sound recording : performed music --&gt;&#xD;                &lt;xsl:when test="substring(marc:leader,7,1)='k'"&gt;a2c91e87-6bab-44d6-8adb-1fd02481fc4f&lt;/xsl:when&gt; &lt;!-- other --&gt; &lt;!-- two-dimensional nonprojectable graphic : ?--&gt;&#xD;                &lt;xsl:when test="substring(marc:leader,7,1)='m'"&gt;df5dddff-9c30-4507-8b82-119ff972d4d7&lt;/xsl:when&gt; &lt;!-- computer file : computer dataset --&gt;&#xD;                &lt;xsl:when test="substring(marc:leader,7,1)='o'"&gt;a2c91e87-6bab-44d6-8adb-1fd02481fc4f&lt;/xsl:when&gt; &lt;!-- kit : other --&gt;&#xD;                &lt;xsl:when test="substring(marc:leader,7,1)='p'"&gt;a2c91e87-6bab-44d6-8adb-1fd02481fc4f&lt;/xsl:when&gt; &lt;!-- mixed material : other --&gt;&#xD;                &lt;xsl:when test="substring(marc:leader,7,1)='r'"&gt;c1e95c2b-4efc-48cf-9e71-edb622cf0c22&lt;/xsl:when&gt; &lt;!-- three-dimensional artifact or naturally occurring object : three-dimensional form --&gt;&#xD;                &lt;xsl:when test="substring(marc:leader,7,1)='t'"&gt;6312d172-f0cf-40f6-b27d-9fa8feaf332f&lt;/xsl:when&gt; &lt;!-- manuscript language material : text --&gt;&#xD;                &lt;xsl:otherwise&gt;a2c91e87-6bab-44d6-8adb-1fd02481fc4f&lt;/xsl:otherwise&gt;                             &lt;!--  : other --&gt;&#xD;                &lt;/xsl:choose&gt;&#xD;            &lt;/instanceTypeId&gt;&#xD;&#xD;            &lt;!-- Identifiers --&gt;&#xD;            &lt;xsl:if test="marc:datafield[@tag='010' or @tag='020' or @tag='022' or @tag='024' or @tag='028' or @tag='035' or @tag='074']&#xD;                        or marc:controlfield[@tag='001']"&gt;&#xD;                &lt;identifiers&gt;&#xD;                &lt;arr&gt;&#xD;                &lt;xsl:for-each select="marc:controlfield[@tag='001']"&gt;&#xD;                    &lt;i&gt;&#xD;                    &lt;value&gt;&lt;xsl:value-of select="."/&gt;&lt;/value&gt;&#xD;                    &lt;!-- A subsequent library specific transformation (style sheet)&#xD;                        must replace this tag with the actual identifierTypeId for&#xD;                        the record identifer type of the given library --&gt;&#xD;                    &lt;identifierTypeIdHere/&gt;&#xD;                    &lt;/i&gt;&#xD;                &lt;/xsl:for-each&gt;&#xD;                &lt;xsl:for-each select="marc:datafield[@tag='001' or @tag='010' or @tag='020' or @tag='022' or @tag='024' or @tag='028' or @tag='035' or @tag='074']"&gt;&#xD;                    &lt;i&gt;&#xD;                    &lt;xsl:choose&gt;&#xD;                        &lt;xsl:when test="current()[@tag='010'] and marc:subfield[@code='a']"&gt;&#xD;                        &lt;value&gt;&#xD;                            &lt;xsl:value-of select="marc:subfield[@code='a']"/&gt;&#xD;                        &lt;/value&gt;&#xD;                        &lt;identifierTypeId&gt;c858e4f2-2b6b-4385-842b-60732ee14abb&lt;/identifierTypeId&gt; &lt;!-- LCCN --&gt;&#xD;                        &lt;/xsl:when&gt;&#xD;                        &lt;xsl:when test="current()[@tag='020'] and marc:subfield[@code='a']"&gt;&#xD;                        &lt;value&gt;&#xD;                            &lt;xsl:value-of select="marc:subfield[@code='a']"/&gt;&#xD;                        &lt;/value&gt;&#xD;                        &lt;identifierTypeId&gt;8261054f-be78-422d-bd51-4ed9f33c3422&lt;/identifierTypeId&gt; &lt;!-- ISBN --&gt;&#xD;                        &lt;/xsl:when&gt;&#xD;                        &lt;xsl:when test="current()[@tag='022'] and marc:subfield[@code='a']"&gt;&#xD;                        &lt;value&gt;&#xD;                            &lt;xsl:value-of select="marc:subfield[@code='a']"/&gt;&#xD;                        &lt;/value&gt;&#xD;                        &lt;identifierTypeId&gt;913300b2-03ed-469a-8179-c1092c991227&lt;/identifierTypeId&gt; &lt;!-- ISSN --&gt;&#xD;                        &lt;/xsl:when&gt;&#xD;                        &lt;xsl:when test="current()[@tag='024'] and marc:subfield[@code='a']"&gt;&#xD;                        &lt;value&gt;&#xD;                            &lt;xsl:value-of select="marc:subfield[@code='a']"/&gt;&#xD;                        &lt;/value&gt;&#xD;                        &lt;identifierTypeId&gt;2e8b3b6c-0e7d-4e48-bca2-b0b23b376af5&lt;/identifierTypeId&gt; &lt;!-- Other standard identifier --&gt;&#xD;                        &lt;/xsl:when&gt;&#xD;                        &lt;xsl:when test="current()[@tag='028'] and marc:subfield[@code='a']"&gt;&#xD;                        &lt;value&gt;&#xD;                            &lt;xsl:value-of select="marc:subfield[@code='a']"/&gt;&#xD;                        &lt;/value&gt;&#xD;                        &lt;identifierTypeId&gt;b5d8cdc4-9441-487c-90cf-0c7ec97728eb&lt;/identifierTypeId&gt; &lt;!-- Publisher number --&gt;&#xD;                        &lt;/xsl:when&gt;&#xD;                        &lt;xsl:when test="current()[@tag='035'] and marc:subfield[@code='a']"&gt;&#xD;                        &lt;value&gt;&#xD;                            &lt;xsl:value-of select="marc:subfield[@code='a']"/&gt;&#xD;                        &lt;/value&gt;&#xD;                        &lt;identifierTypeId&gt;7e591197-f335-4afb-bc6d-a6d76ca3bace&lt;/identifierTypeId&gt; &lt;!-- System control number --&gt;&#xD;                        &lt;/xsl:when&gt;&#xD;                        &lt;xsl:when test="current()[@tag='074'] and marc:subfield[@code='a']"&gt;&#xD;                        &lt;value&gt;&#xD;                            &lt;xsl:value-of select="marc:subfield[@code='a']"/&gt;&#xD;                        &lt;/value&gt;&#xD;                        &lt;identifierTypeId&gt;351ebc1c-3aae-4825-8765-c6d50dbf011f&lt;/identifierTypeId&gt; &lt;!-- GPO item number --&gt;&#xD;                        &lt;/xsl:when&gt;&#xD;                    &lt;/xsl:choose&gt;&#xD;                    &lt;/i&gt;&#xD;                &lt;/xsl:for-each&gt;&#xD;                &lt;/arr&gt;&#xD;                &lt;/identifiers&gt;&#xD;            &lt;/xsl:if&gt;&#xD;&#xD;            &lt;!-- Classifications --&gt;&#xD;            &lt;xsl:if test="marc:datafield[@tag='050' or @tag='060' or @tag='080' or @tag='082' or @tag='086' or @tag='090']"&gt;&#xD;                &lt;classifications&gt;&#xD;                &lt;arr&gt;&#xD;                    &lt;xsl:for-each select="marc:datafield[@tag='050' or @tag='060' or @tag='080' or @tag='082' or @tag='086' or @tag='090']"&gt;&#xD;                    &lt;i&gt;&#xD;                        &lt;xsl:choose&gt;&#xD;                        &lt;xsl:when test="current()[@tag='050']"&gt;&#xD;                            &lt;classificationNumber&gt;&#xD;                            &lt;xsl:for-each select="marc:subfield[@code='a' or @code='b']"&gt;&#xD;                                &lt;xsl:if test="position() &gt; 1"&gt;&#xD;                                &lt;xsl:text&gt;; &lt;/xsl:text&gt;&#xD;                            &lt;/xsl:if&gt;&#xD;                            &lt;xsl:value-of select="."/&gt;&#xD;                            &lt;/xsl:for-each&gt;&#xD;                            &lt;/classificationNumber&gt;&#xD;                            &lt;classificationTypeId&gt;ce176ace-a53e-4b4d-aa89-725ed7b2edac&lt;/classificationTypeId&gt; &lt;!-- LC, Library of Congress --&gt;&#xD;                        &lt;/xsl:when&gt;&#xD;                        &lt;xsl:when test="current()[@tag='082']"&gt;&#xD;                            &lt;classificationNumber&gt;&#xD;                            &lt;xsl:for-each select="marc:subfield[@code='a' or @code='b']"&gt;&#xD;                                &lt;xsl:if test="position() &gt; 1"&gt;&#xD;                                &lt;xsl:text&gt;; &lt;/xsl:text&gt;&#xD;                            &lt;/xsl:if&gt;&#xD;                            &lt;xsl:value-of select="."/&gt;&#xD;                            &lt;/xsl:for-each&gt;&#xD;                            &lt;/classificationNumber&gt;&#xD;                            &lt;classificationTypeId&gt;42471af9-7d25-4f3a-bf78-60d29dcf463b&lt;/classificationTypeId&gt; &lt;!-- Dewey --&gt;&#xD;                        &lt;/xsl:when&gt;&#xD;                        &lt;xsl:when test="current()[@tag='086']"&gt;&#xD;                            &lt;classificationNumber&gt;&#xD;                            &lt;xsl:value-of select="marc:subfield[@code='a']"/&gt;&#xD;                            &lt;/classificationNumber&gt;&#xD;                            &lt;classificationTypeId&gt;9075b5f8-7d97-49e1-a431-73fdd468d476&lt;/classificationTypeId&gt; &lt;!-- SUDOC --&gt;&#xD;                        &lt;/xsl:when&gt;&#xD;                        &lt;/xsl:choose&gt;&#xD;                    &lt;/i&gt;&#xD;                    &lt;/xsl:for-each&gt;&#xD;                &lt;/arr&gt;&#xD;                &lt;/classifications&gt;&#xD;            &lt;/xsl:if&gt;&#xD;&#xD;            &lt;!-- title --&gt;&#xD;            &lt;xsl:for-each select="marc:datafield[@tag='245']"&gt;&#xD;                &lt;title&gt;&#xD;                &lt;xsl:call-template name="remove-characters-last"&gt;&#xD;                    &lt;xsl:with-param  name="input" select="marc:subfield[@code='a']" /&gt;&#xD;                    &lt;xsl:with-param  name="characters"&gt;,-./ :;&lt;/xsl:with-param&gt;&#xD;                &lt;/xsl:call-template&gt;&#xD;                &lt;xsl:if test="marc:subfield[@code='b']"&gt;&#xD;                &lt;xsl:text&gt; : &lt;/xsl:text&gt;&#xD;                    &lt;xsl:call-template name="remove-characters-last"&gt;&#xD;                    &lt;xsl:with-param  name="input" select="marc:subfield[@code='b']" /&gt;&#xD;                    &lt;xsl:with-param  name="characters"&gt;,-./ :;&lt;/xsl:with-param&gt;&#xD;                    &lt;/xsl:call-template&gt;&#xD;                &lt;/xsl:if&gt;&#xD;                &lt;xsl:if test="marc:subfield[@code='h']"&gt;&#xD;                    &lt;xsl:text&gt; &lt;/xsl:text&gt;&#xD;                    &lt;xsl:call-template name="remove-characters-last"&gt;&#xD;                    &lt;xsl:with-param  name="input" select="marc:subfield[@code='h']" /&gt;&#xD;                    &lt;xsl:with-param  name="characters"&gt;,-./ :;&lt;/xsl:with-param&gt;&#xD;                    &lt;/xsl:call-template&gt;&#xD;                &lt;/xsl:if&gt;&#xD;                &lt;/title&gt;&#xD;            &lt;/xsl:for-each&gt;&#xD;            &lt;!-- Contributors --&gt;&#xD;            &lt;xsl:if test="marc:datafield[@tag='100' or @tag='110' or @tag='111' or @tag='700' or @tag='710' or @tag='711']"&gt;&#xD;                &lt;contributors&gt;&#xD;                &lt;arr&gt;&#xD;                    &lt;xsl:for-each select="marc:datafield[@tag='100' or @tag='110' or @tag='111' or @tag='700' or @tag='710' or @tag='711']"&gt;&#xD;                    &lt;i&gt;&#xD;                        &lt;name&gt;&#xD;                        &lt;xsl:for-each select="marc:subfield[@code='a' or @code='b' or @code='c' or @code='d' or @code='f' or @code='g' or @code='j' or @code='k' or @code='l' or @code='n' or @code='p' or @code='q' or @code='t' or @code='u']"&gt;&#xD;                        &lt;xsl:if test="position() &gt; 1"&gt;&#xD;                            &lt;xsl:text&gt;, &lt;/xsl:text&gt;&#xD;                        &lt;/xsl:if&gt;&#xD;                        &lt;xsl:call-template name="remove-characters-last"&gt;&#xD;                            &lt;xsl:with-param  name="input" select="." /&gt;&#xD;                            &lt;xsl:with-param  name="characters"&gt;,-.&lt;/xsl:with-param&gt;&#xD;                        &lt;/xsl:call-template&gt;&#xD;                        &lt;/xsl:for-each&gt;&#xD;                        &lt;/name&gt;&#xD;                        &lt;xsl:choose&gt;&#xD;                        &lt;xsl:when test="@tag='100' or @tag='700'"&gt;&#xD;                            &lt;contributorNameTypeId&gt;2b94c631-fca9-4892-a730-03ee529ffe2a&lt;/contributorNameTypeId&gt; &lt;!-- personal name --&gt;&#xD;                            &lt;xsl:if test="@tag='100'"&gt;&#xD;                            &lt;primary&gt;true&lt;/primary&gt;&#xD;                            &lt;/xsl:if&gt;&#xD;                        &lt;/xsl:when&gt;&#xD;                        &lt;xsl:when test="@tag='110' or @tag='710'"&gt;&#xD;                            &lt;contributorNameTypeId&gt;2e48e713-17f3-4c13-a9f8-23845bb210aa&lt;/contributorNameTypeId&gt; &lt;!-- corporate name --&gt;&#xD;                        &lt;/xsl:when&gt;&#xD;                        &lt;xsl:when test="@tag='111' or @tage='711'"&gt;&#xD;                            &lt;contributorNameTypeId&gt;e8b311a6-3b21-43f2-a269-dd9310cb2d0a&lt;/contributorNameTypeId&gt; &lt;!-- meeting name --&gt;&#xD;                        &lt;/xsl:when&gt;&#xD;                        &lt;xsl:otherwise&gt;&#xD;                            &lt;contributorNameTypeId&gt;2b94c631-fca9-4892-a730-03ee529ffe2a&lt;/contributorNameTypeId&gt; &lt;!-- personal name --&gt;&#xD;                        &lt;/xsl:otherwise&gt;&#xD;                        &lt;/xsl:choose&gt;&#xD;                        &lt;xsl:if test="marc:subfield[@code='e' or @code='4']"&gt;&#xD;                        &lt;contributorTypeId&gt;&#xD;                            &lt;xsl:call-template name="map-relator"/&gt;&#xD;                        &lt;/contributorTypeId&gt;&#xD;                        &lt;/xsl:if&gt;&#xD;                    &lt;/i&gt;&#xD;                    &lt;/xsl:for-each&gt;&#xD;                &lt;/arr&gt;&#xD;                &lt;/contributors&gt;&#xD;            &lt;/xsl:if&gt;&#xD;&#xD;            &lt;!-- Editions --&gt;&#xD;            &lt;xsl:if test="marc:datafield[@tag='250']"&gt;&#xD;                &lt;editions&gt;&#xD;                &lt;arr&gt;&#xD;                &lt;xsl:for-each select="marc:datafield[@tag='250']"&gt;&#xD;                    &lt;i&gt;&#xD;                    &lt;xsl:value-of select="marc:subfield[@code='a']"/&gt;&#xD;                    &lt;xsl:if test="marc:subfield[@code='b']"&gt;; &lt;xsl:value-of select="marc:subfield[@code='b']"/&gt;&lt;/xsl:if&gt;&#xD;                    &lt;/i&gt;&#xD;                &lt;/xsl:for-each&gt;&#xD;                &lt;/arr&gt;&#xD;                &lt;/editions&gt;&#xD;            &lt;/xsl:if&gt;&#xD;&#xD;            &lt;!-- Publication --&gt;&#xD;            &lt;xsl:choose&gt;&#xD;                &lt;xsl:when test="marc:datafield[@tag='260' or @tag='264']"&gt;&#xD;                &lt;publication&gt;&#xD;                    &lt;arr&gt;&#xD;                    &lt;xsl:for-each select="marc:datafield[@tag='260' or @tag='264']"&gt;&#xD;                        &lt;i&gt;&#xD;                        &lt;publisher&gt;&#xD;                            &lt;xsl:value-of select="marc:subfield[@code='b']"/&gt;&#xD;                        &lt;/publisher&gt;&#xD;                        &lt;place&gt;&#xD;                            &lt;xsl:value-of select="marc:subfield[@code='a']"/&gt;&#xD;                        &lt;/place&gt;&#xD;                        &lt;dateOfPublication&gt;&#xD;                            &lt;xsl:value-of select="marc:subfield[@code='c']"/&gt;&#xD;                        &lt;/dateOfPublication&gt;&#xD;                        &lt;/i&gt;&#xD;                    &lt;/xsl:for-each&gt;&#xD;                    &lt;/arr&gt;&#xD;                &lt;/publication&gt;&#xD;                &lt;/xsl:when&gt;&#xD;                &lt;xsl:otherwise&gt;&#xD;                &lt;publication&gt;&#xD;                    &lt;arr&gt;&#xD;                    &lt;i&gt;&#xD;                        &lt;dateOfPublication&gt;&#xD;                        &lt;xsl:value-of select="substring(marc:controlfield[@tag='008'],8,4)"/&gt;&#xD;                        &lt;/dateOfPublication&gt;&#xD;                    &lt;/i&gt;&#xD;                    &lt;/arr&gt;&#xD;                &lt;/publication&gt;&#xD;                &lt;/xsl:otherwise&gt;&#xD;            &lt;/xsl:choose&gt;&#xD;&#xD;            &lt;!-- physicalDescriptions --&gt;&#xD;            &lt;xsl:if test="marc:datafield[@tag='300']"&gt;&#xD;                &lt;physicalDescriptions&gt;&#xD;                &lt;arr&gt;&#xD;                    &lt;xsl:for-each select="marc:datafield[@tag='300']"&gt;&#xD;                    &lt;i&gt;&#xD;                        &lt;xsl:call-template name="remove-characters-last"&gt;&#xD;                        &lt;xsl:with-param  name="input" select="marc:subfield[@code='a']" /&gt;&#xD;                        &lt;xsl:with-param  name="characters"&gt;,-./ :;&lt;/xsl:with-param&gt;&#xD;                        &lt;/xsl:call-template&gt;&#xD;                    &lt;/i&gt;&#xD;                    &lt;/xsl:for-each&gt;&#xD;                &lt;/arr&gt;&#xD;                &lt;/physicalDescriptions&gt;&#xD;            &lt;/xsl:if&gt;&#xD;&#xD;            &lt;!-- Subjects --&gt;&#xD;            &lt;xsl:if test="marc:datafield[@tag='600' or @tag='610' or @tag='611' or @tag='630' or @tag='648' or @tag='650' or @tag='651' or @tag='653' or @tag='654' or @tag='655' or @tag='656' or @tag='657' or @tag='658' or @tag='662' or @tag='69X']"&gt;&#xD;                &lt;subjects&gt;&#xD;                &lt;arr&gt;&#xD;                &lt;xsl:for-each select="marc:datafield[@tag='600' or @tag='610' or @tag='611' or @tag='630' or @tag='648' or @tag='650' or @tag='651' or @tag='653' or @tag='654' or @tag='655' or @tag='656' or @tag='657' or @tag='658' or @tag='662' or @tag='69X']"&gt;&#xD;                    &lt;i&gt;&#xD;                    &lt;xsl:for-each select="marc:subfield[@code='a' or @code='b' or @code='c' or @code='d' or @code='f' or @code='g' or @code='j' or @code='k' or @code='l' or @code='n' or @code='p' or @code='q' or @code='t' or @code='u' or @code='v' or @code='z']"&gt;&#xD;                    &lt;xsl:if test="position() &gt; 1"&gt;&#xD;                        &lt;xsl:text&gt;--&lt;/xsl:text&gt;&#xD;                    &lt;/xsl:if&gt;&#xD;                    &lt;xsl:call-template name="remove-characters-last"&gt;&#xD;                        &lt;xsl:with-param  name="input" select="." /&gt;&#xD;                        &lt;xsl:with-param  name="characters"&gt;,-.&lt;/xsl:with-param&gt;&#xD;                        &lt;/xsl:call-template&gt;&#xD;                    &lt;/xsl:for-each&gt;&#xD;                    &lt;/i&gt;&#xD;                &lt;/xsl:for-each&gt;&#xD;                &lt;/arr&gt;&#xD;                &lt;/subjects&gt;&#xD;            &lt;/xsl:if&gt;&#xD;        &lt;/instance&gt;&#xD;&#xD;        &lt;!-- Additional info for creating match key in FOLIO Inventory match module --&gt;&#xD;        &lt;matchKey&gt;&#xD;            &lt;xsl:for-each select="marc:datafield[@tag='245']"&gt;&#xD;            &lt;title&gt;&#xD;                &lt;xsl:call-template name="remove-characters-last"&gt;&#xD;                &lt;xsl:with-param  name="input" select="marc:subfield[@code='a']" /&gt;&#xD;                &lt;xsl:with-param  name="characters"&gt;,-./ :;&lt;/xsl:with-param&gt;&#xD;                &lt;/xsl:call-template&gt;&#xD;            &lt;/title&gt;&#xD;            &lt;remainder-of-title&gt;&#xD;            &lt;xsl:text&gt; : &lt;/xsl:text&gt;&#xD;                &lt;xsl:call-template name="remove-characters-last"&gt;&#xD;                &lt;xsl:with-param  name="input" select="marc:subfield[@code='b']" /&gt;&#xD;                &lt;xsl:with-param  name="characters"&gt;,-./ :;&lt;/xsl:with-param&gt;&#xD;                &lt;/xsl:call-template&gt;&#xD;            &lt;/remainder-of-title&gt;&#xD;            &lt;medium&gt;&#xD;                &lt;xsl:call-template name="remove-characters-last"&gt;&#xD;                &lt;xsl:with-param  name="input" select="marc:subfield[@code='h']" /&gt;&#xD;                &lt;xsl:with-param  name="characters"&gt;,-./ :;&lt;/xsl:with-param&gt;&#xD;                &lt;/xsl:call-template&gt;&#xD;            &lt;/medium&gt;&#xD;            &lt;!-- Only fields that are actually included in&#xD;                the instance somewhere - for example in 'title' -&#xD;                should be included as 'matchKey' elements lest&#xD;                the instance "magically" splits on "invisible"&#xD;                properties.&#xD;            &lt;name-of-part-section-of-work&gt;&#xD;                &lt;xsl:value-of select="marc:subfield[@code='p']" /&gt;&#xD;            &lt;/name-of-part-section-of-work&gt;&#xD;            &lt;number-of-part-section-of-work&gt;&#xD;                &lt;xsl:value-of select="marc:subfield[@code='n']" /&gt;&#xD;            &lt;/number-of-part-section-of-work&gt;&#xD;            &lt;inclusive-dates&gt;&#xD;                &lt;xsl:value-of select="marc:subfield[@code='f']" /&gt;&#xD;            &lt;/inclusive-dates&gt; --&gt;&#xD;            &lt;/xsl:for-each&gt;&#xD;        &lt;/matchKey&gt;&#xD;    &lt;/xsl:template&gt;&#xD;&#xD;    &lt;xsl:template match="text()"/&gt;&#xD;&#xD;    &lt;xsl:template name="remove-characters-last"&gt;&#xD;        &lt;xsl:param name="input" /&gt;&#xD;        &lt;xsl:param name="characters"/&gt;&#xD;        &lt;xsl:variable name="lastcharacter" select="substring($input,string-length($input))" /&gt;&#xD;        &lt;xsl:choose&gt;&#xD;            &lt;xsl:when test="$characters and $lastcharacter and contains($characters, $lastcharacter)"&gt;&#xD;            &lt;xsl:call-template name="remove-characters-last"&gt;&#xD;                &lt;xsl:with-param  name="input" select="substring($input,1, string-length($input)-1)" /&gt;&#xD;                &lt;xsl:with-param  name="characters" select="$characters" /&gt;&#xD;            &lt;/xsl:call-template&gt;&#xD;            &lt;/xsl:when&gt;&#xD;            &lt;xsl:otherwise&gt;&#xD;            &lt;xsl:value-of select="$input"/&gt;&#xD;            &lt;/xsl:otherwise&gt;&#xD;        &lt;/xsl:choose&gt;&#xD;    &lt;/xsl:template&gt;&#xD;&#xD;&lt;/xsl:stylesheet&gt;</script>
                    <id>301301</id>
                    <testData></testData>
                    <testOutput></testOutput>
                </step>
                <transformation>318201</transformation>
            </stepAssociations>
            <stepAssociations>
                <id>318402</id>
                <position>2</position>
                <step xsi:type="xmlTransformationStep">
                    <description>Holdings and Items, Susquehanna</description>
                    <enabled>true</enabled>
                    <inputFormat>XML</inputFormat>
                    <name>Holdings and Items, Susquehanna</name>
                    <outputFormat>XML</outputFormat>
                    <script>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#xD;
&lt;xsl:stylesheet&#xD;
  version="1.0"&#xD;
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&#xD;
  xmlns:marc="http://www.loc.gov/MARC21/slim"&#xD;
  xmlns:oai20="http://www.openarchives.org/OAI/2.0/"&#xD;
  &gt;&#xD;
&#xD;
  &lt;xsl:strip-space elements="*"/&gt;&#xD;
  &lt;xsl:output indent="yes" method="xml" version="1.0" encoding="UTF-8"/&gt;&#xD;
&#xD;
  &lt;xsl:template match="collection"&gt;&#xD;
    &lt;collection&gt;&#xD;
        &lt;xsl:apply-templates/&gt;&#xD;
    &lt;/collection&gt;&#xD;
  &lt;/xsl:template&gt;&#xD;
&#xD;
  &lt;xsl:template match="record"&gt;&#xD;
    &lt;record&gt;&#xD;
        &lt;xsl:for-each select="@* | node()"&gt;&#xD;
            &lt;xsl:copy-of select="."/&gt;&#xD;
        &lt;/xsl:for-each&gt;&#xD;
        &lt;xsl:apply-templates/&gt;&#xD;
    &lt;/record&gt;&#xD;
  &lt;/xsl:template&gt;&#xD;
&#xD;
  &lt;xsl:variable name="WILL_LEND"&gt;46970b40-918e-47a4-a45d-b1677a2d3d46&lt;/xsl:variable&gt; &lt;!-- FOLIO Inventory ILL Policy value 'Will lend' --&gt;&#xD;
  &lt;xsl:variable name="WILL_NOT_LEND"&gt;b0f97013-87f5-4bab-87f2-ac4a5191b489&lt;/xsl:variable&gt; &lt;!-- FOLIO Inventory ILL Policy value 'Will not lend' --&gt;&#xD;
&#xD;
  &lt;xsl:variable name="CNTYPE_DEWEY"&gt;03dd64d0-5626-4ecd-8ece-4531e0069f35&lt;/xsl:variable&gt; &lt;!-- Call number type: Dewey Decimal Classification  --&gt;&#xD;
  &lt;xsl:variable name="CNTYPE_LOC"&gt;95467209-6d7b-468b-94df-0f5d7ad2747d&lt;/xsl:variable&gt; &lt;!-- Call number type: LOC  --&gt;&#xD;
  &lt;xsl:variable name="CNTYPE_OTHER"&gt;6caca63e-5651-4db6-9247-3205156e9699&lt;/xsl:variable&gt; &lt;!-- Call number type: Other (catch unmapped)  --&gt;&#xD;
  &lt;xsl:variable name="CNTYPE_SUDOC"&gt;fc388041-6cd0-4806-8a74-ebe3b9ab4c6e&lt;/xsl:variable&gt; &lt;!-- Call number type: Other (catch unmapped)  --&gt;&#xD;
&#xD;
  &lt;xsl:template match="//marc:record"&gt;&#xD;
    &lt;holdingsRecords&gt;&#xD;
      &lt;xsl:choose&gt;&#xD;
        &lt;xsl:when test="marc:datafield[@tag='900' and @ind1!='4' and @ind1!=' ']"&gt;        &#xD;
          &lt;arr&gt;&#xD;
            &lt;xsl:for-each select="marc:datafield[@tag='900' and @ind1!='4' and @ind1!=' ']"&gt;&#xD;
              &lt;xsl:variable name="holdingsId" select="marc:subfield[@code='8']"/&gt;&#xD;
              &lt;i&gt;&#xD;
                &lt;formerIds&gt;&#xD;
                  &lt;arr&gt;&#xD;
                    &lt;i&gt;&#xD;
                      &lt;xsl:value-of select="$holdingsId"/&gt;&#xD;
                    &lt;/i&gt;&#xD;
                  &lt;/arr&gt;&#xD;
                &lt;/formerIds&gt;&#xD;
                &lt;xsl:variable name="LOC" select="marc:subfield[@code='d']" /&gt;&#xD;
                &lt;illPolicyId&gt;&#xD;
                  &lt;xsl:choose&gt;&#xD;
                    &lt;xsl:when test="$LOC='FOLIO'"&gt;&lt;xsl:value-of select="$WILL_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                    &lt;xsl:when test="$LOC='FOLIOSCORE'"&gt;&lt;xsl:value-of select="$WILL_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                    &lt;xsl:when test="$LOC='JUVFOLIO'"&gt;&lt;xsl:value-of select="$WILL_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                    &lt;xsl:when test="$LOC='JUV'"&gt;&lt;xsl:value-of select="$WILL_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                    &lt;xsl:when test="$LOC='LEISURE'"&gt;&lt;xsl:value-of select="$WILL_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                    &lt;xsl:when test="$LOC='MAIN'"&gt;&lt;xsl:value-of select="$WILL_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                    &lt;xsl:when test="$LOC='SCORES'"&gt;&lt;xsl:value-of select="$WILL_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                    &lt;xsl:when test="$LOC='OVERSIZE'"&gt;&lt;xsl:value-of select="$WILL_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                    &lt;xsl:when test="$LOC='VIDEOS'"&gt;&lt;xsl:value-of select="$WILL_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                    &lt;xsl:when test="$LOC='MUSIC_CDS'"&gt;&lt;xsl:value-of select="$WILL_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                    &lt;xsl:otherwise&gt;&lt;xsl:value-of select="$WILL_NOT_LEND" /&gt;&lt;/xsl:otherwise&gt;&#xD;
                  &lt;/xsl:choose&gt;&#xD;
                &lt;/illPolicyId&gt;&#xD;
                &lt;permanentLocationIdHere&gt;&lt;xsl:value-of select="$LOC"/&gt;&lt;/permanentLocationIdHere&gt;&#xD;
                &lt;callNumber&gt;&#xD;
                  &lt;xsl:for-each select="marc:subfield[@code='f']"&gt;&#xD;
                    &lt;xsl:if test="position() &gt; 1"&gt;&#xD;
                      &lt;xsl:text&gt; &lt;/xsl:text&gt;&#xD;
                    &lt;/xsl:if&gt;&#xD;
                    &lt;xsl:value-of select="."/&gt;&#xD;
                  &lt;/xsl:for-each&gt;&#xD;
                &lt;/callNumber&gt;&#xD;
                &lt;xsl:for-each select="../marc:datafield[@tag='995']"&gt;&#xD;
                  &lt;xsl:if test="marc:subfield[@code='ff']=$holdingsId"&gt;&#xD;
                    &lt;callNumberTypeId&gt;&#xD;
                      &lt;xsl:variable name="CNTYPE" select="marc:subfield[@code='j']" /&gt;&#xD;
                      &lt;xsl:choose&gt;&#xD;
                        &lt;xsl:when test="$CNTYPE='0'"&gt;&lt;xsl:value-of select="$CNTYPE_LOC" /&gt;&lt;/xsl:when&gt;&#xD;
                        &lt;xsl:when test="$CNTYPE='1'"&gt;&lt;xsl:value-of select="$CNTYPE_DEWEY" /&gt;&lt;/xsl:when&gt;&#xD;
                        &lt;xsl:when test="$CNTYPE='3'"&gt;&lt;xsl:value-of select="$CNTYPE_SUDOC" /&gt;&lt;/xsl:when&gt;&#xD;
                        &lt;xsl:when test="$CNTYPE='8'"&gt;&lt;xsl:value-of select="$CNTYPE_OTHER" /&gt;&lt;/xsl:when&gt;&#xD;
                      &lt;/xsl:choose&gt;&#xD;
                    &lt;/callNumberTypeId&gt;&#xD;
                  &lt;/xsl:if&gt;&#xD;
                &lt;/xsl:for-each&gt;&#xD;
                &lt;notes&gt;&#xD;
                    &lt;arr&gt;&#xD;
                      &lt;i&gt;&#xD;
                        &lt;note&gt;&lt;xsl:value-of select="concat('Location code: ', $LOC)"/&gt;&lt;/note&gt;&#xD;
                        &lt;holdingsNoteTypeId&gt;b160f13a-ddba-4053-b9c4-60ec5ea45d56&lt;/holdingsNoteTypeId&gt;&#xD;
                        &lt;staffOnly&gt;true&lt;/staffOnly&gt;&#xD;
                      &lt;/i&gt;&#xD;
                    &lt;/arr&gt;&#xD;
                  &lt;/notes&gt;&#xD;
                &lt;items&gt;&#xD;
                  &lt;arr&gt;&#xD;
                    &lt;xsl:for-each select="../marc:datafield[@tag='995']"&gt;&#xD;
                      &lt;xsl:if test="marc:subfield[@code='ff']=$holdingsId"&gt;&#xD;
                        &lt;i&gt;&#xD;
                          &lt;itemIdentifier&gt;&#xD;
                            &lt;xsl:value-of select="marc:subfield[@code='a']"/&gt;&#xD;
                          &lt;/itemIdentifier&gt;&#xD;
                          &lt;barcode&gt;&#xD;
                            &lt;xsl:value-of select="marc:subfield[@code='s']"/&gt;&#xD;
                          &lt;/barcode&gt;&#xD;
                          &lt;permanentLoanTypeId&gt;2b94c631-fca9-4892-a730-03ee529ffe27&lt;/permanentLoanTypeId&gt;                    &lt;!-- Can circulate --&gt;&#xD;
                          &lt;materialTypeId&gt;&#xD;
                            &lt;!-- Mappings to ReShare specific material types, taken from OCLC table "Type of Record" --&gt;&#xD;
                            &lt;xsl:choose&gt;&#xD;
                              &lt;xsl:when test="marc:subfield[@code='t']='BOOK'"      &gt;e65ed344-a691-4f8f-8446-3c0a346c6882&lt;/xsl:when&gt; &lt;!-- BKS --&gt;&#xD;
                              &lt;xsl:when test="marc:subfield[@code='t']='ELEC'"      &gt;22cb5b81-2056-46ed-8050-c5d8f01caf90&lt;/xsl:when&gt; &lt;!-- COM --&gt;&#xD;
                              &lt;xsl:when test="marc:subfield[@code='t']='ISSUE'"     &gt;191da404-dec2-4977-9770-1443d9d6c238&lt;/xsl:when&gt; &lt;!-- CNR --&gt;&#xD;
                              &lt;xsl:when test="marc:subfield[@code='t']='MANUSCRIPT'"&gt;e65ed344-a691-4f8f-8446-3c0a346c6882&lt;/xsl:when&gt; &lt;!-- BKS --&gt;&#xD;
                              &lt;xsl:when test="marc:subfield[@code='t']='MAP'"       &gt;9f2c8d85-97e6-4722-a67c-bb51ccfb7781&lt;/xsl:when&gt; &lt;!-- MAP --&gt;&#xD;
                              &lt;xsl:when test="marc:subfield[@code='t']='OTHER'"     &gt;04858422-c46f-4041-94fc-f5c5a6b98319&lt;/xsl:when&gt; &lt;!-- Other --&gt;&#xD;
                              &lt;xsl:when test="marc:subfield[@code='t']='SCORE'"     &gt;e5578a7e-49b9-4859-a86a-21b812215b4f&lt;/xsl:when&gt; &lt;!-- SCO --&gt;&#xD;
                              &lt;xsl:when test="marc:subfield[@code='t']='RECORD'"    &gt;d8dc9046-a9f4-4789-adf5-678fd855b016&lt;/xsl:when&gt; &lt;!-- REC --&gt;&#xD;
                              &lt;xsl:when test="marc:subfield[@code='t']='DVD'"       &gt;14f1845d-2fad-4091-80c8-48614eaea40b&lt;/xsl:when&gt; &lt;!-- VIS --&gt;&#xD;
                              &lt;xsl:otherwise&gt;f6dd0721-5d4a-439e-9205-c71aef39d15b&lt;/xsl:otherwise&gt;                                    &lt;!-- Unmapped --&gt;&#xD;
                            &lt;/xsl:choose&gt;&#xD;
                          &lt;/materialTypeId&gt;&#xD;
                          &lt;status&gt;&#xD;
                            &lt;name&gt;Unknown&lt;/name&gt;&#xD;
                          &lt;/status&gt;&#xD;
                          &lt;enumeration&gt;&#xD;
                            &lt;xsl:choose&gt;&#xD;
                              &lt;xsl:when test="marc:subfield[@code='w']"&gt;&lt;xsl:value-of select="concat(marc:subfield[@code='e'], ' ', marc:subfield[@code='w'])"/&gt;&lt;/xsl:when&gt;&#xD;
                              &lt;xsl:otherwise&gt;&lt;xsl:value-of select="marc:subfield[@code='e']"/&gt;&lt;/xsl:otherwise&gt;&#xD;
                            &lt;/xsl:choose&gt;&#xD;
                          &lt;/enumeration&gt;&#xD;
                          &lt;chronology&gt;&#xD;
                            &lt;xsl:choose&gt;&#xD;
                              &lt;xsl:when test="marc:subfield[@code='x']"&gt;&lt;xsl:value-of select="concat(marc:subfield[@code='f'], ' ', marc:subfield[@code='x'])"/&gt;&lt;/xsl:when&gt;&#xD;
                              &lt;xsl:otherwise&gt;&lt;xsl:value-of select="marc:subfield[@code='f']"/&gt;&lt;/xsl:otherwise&gt;&#xD;
                            &lt;/xsl:choose&gt;&#xD;
                          &lt;/chronology&gt;                  &#xD;
                        &lt;/i&gt;&#xD;
                      &lt;/xsl:if&gt;&#xD;
                    &lt;/xsl:for-each&gt;&#xD;
                  &lt;/arr&gt;&#xD;
                &lt;/items&gt;&#xD;
              &lt;/i&gt;&#xD;
            &lt;/xsl:for-each&gt;&#xD;
          &lt;/arr&gt;&#xD;
        &lt;/xsl:when&gt;&#xD;
        &lt;xsl:otherwise&gt;&#xD;
          &lt;arr&gt;&#xD;
            &lt;i&gt;&#xD;
              &lt;permanentLocationIdHere/&gt;&#xD;
            &lt;/i&gt;&#xD;
          &lt;/arr&gt;&#xD;
        &lt;/xsl:otherwise&gt;&#xD;
      &lt;/xsl:choose&gt;&#xD;
    &lt;/holdingsRecords&gt;&#xD;
  &lt;/xsl:template&gt;&#xD;
  &lt;xsl:template match="text()"/&gt;&#xD;
&lt;/xsl:stylesheet&gt;&#xD;
</script>
                    <id>318301</id>
                    <testData></testData>
                    <testOutput></testOutput>
                </step>
                <transformation>318201</transformation>
            </stepAssociations>
            <stepAssociations>
                <id>318403</id>
                <position>3</position>
                <step xsi:type="xmlTransformationStep">
                    <description>Maps locations, record identifier type for Susquehanna</description>
                    <inputFormat>XML</inputFormat>
                    <name>Library codes, Susquehanna</name>
                    <outputFormat>XML</outputFormat>
                    <script>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&#xD;
&lt;xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;&#xD;
&lt;xsl:output indent="yes" method="xml" version="1.0" encoding="UTF-8"/&gt;&#xD;
  &lt;xsl:template match="@* | node()"&gt;&#xD;
    &lt;xsl:copy&gt;&#xD;
      &lt;xsl:apply-templates select="@* | node()"/&gt;&#xD;
    &lt;/xsl:copy&gt;&#xD;
  &lt;/xsl:template&gt;&#xD;
&#xD;
  &lt;!-- Map legacy code for the library/institution to a FOLIO resource identifier&#xD;
       type UUID. Used for qualifying a local record identifier with the library&#xD;
       it originated from in context of a shared index setup where the Instance&#xD;
       represents bib records from multiple libraries.&#xD;
  --&gt;&#xD;
  &lt;xsl:template match="//identifierTypeIdHere"&gt;&#xD;
    &lt;identifierTypeId&gt;9ef9ebbc-00fa-5786-aa9b-615e80d9b566&lt;/identifierTypeId&gt;&#xD;
  &lt;/xsl:template&gt;&#xD;
&#xD;
  &lt;!-- Map legacy location code to a FOLIO location UUID --&gt;&#xD;
  &lt;xsl:template match="//permanentLocationIdHere"&gt;&#xD;
    &lt;permanentLocationId&gt;&#xD;
      &lt;xsl:choose&gt;&#xD;
        &lt;xsl:when test=".='FOLIO'"&gt;d71ee2fc-a103-512f-8c8c-7b58319ca541&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='FOLIOSCORE'"&gt;ab45865c-1eaa-58a5-8237-3a671022a6f9&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='JUVFOLIO'"&gt;48e7cad6-8441-5d1a-8407-3e915cace436&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='JUV'"&gt;827f23ee-77f2-5e6e-94e6-fd10c7993fdb&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='LEISURE'"&gt;67e92850-1b51-5099-af5f-f24fba273e2c&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='MAIN'"&gt;1824e787-e16a-5067-b963-a87d48dc5c03&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='SCORES'"&gt;0d70bb37-fd7d-5c66-afde-9838f0cb39c2&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='OVERSIZE'"&gt;5c428f69-615a-53f4-a54e-10180854fdb9&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='VIDEO'"&gt;84095983-5f1d-5939-bf5d-497211286c29&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='VIDEOS'"&gt;84095983-5f1d-5939-bf5d-497211286c29&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='MUSIC_CD'"&gt;19ebd702-fe23-52e9-845c-1f754531d473&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='MUSIC_CDS'"&gt;19ebd702-fe23-52e9-845c-1f754531d473&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='ATLAS_REF'"&gt;26a1098e-45f4-550e-bc40-8a9e6e04e3fd&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='RESHELVING'"&gt;be0b7ac4-4836-582a-92bc-6815815e484d&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='GAMES'"&gt;ff360854-437f-5198-8937-058a06bcabda&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='COMPACSHLF'"&gt;5338614c-b7f9-54eb-83ab-260a82e83986&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='WITHDRAWN'"&gt;d021d11f-b1a8-5404-9edf-8017d9e5202d&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='EQUIPMENT'"&gt;02aa38bc-1b35-5897-be49-7c7e4be2d679&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='GRAPHICNOV'"&gt;ed3c5a47-d56f-5314-b441-f8f375c78525&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='TECH_SERV'"&gt;eab6ebda-b264-57cf-8c2a-9eeea672f345&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='REPAIR'"&gt;dd864aa6-b1b1-500d-971f-bed457e993f3&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='SERV_DESK'"&gt;634f594c-02bd-5c9e-b917-aef327cf8f7c&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='LOST'"&gt;f98673f6-24ad-50af-908b-ed1512731f9e&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='BINDERY'"&gt;5cb48e90-aa9e-599d-a328-2d92ac0ff5c5&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='CATALOGING'"&gt;395749ae-c0aa-57d2-a496-6466dd225670&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='CHECKEDOUT'"&gt;05a91eb1-896a-5499-a0b5-2a48525f2e43&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='ON_ORDER'"&gt;030f8b71-9cd9-5aee-a9c3-0241b5137a64&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='MICROFICHE'"&gt;e3fd5bdb-e354-5630-8021-fa2746d609ff&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='MICROFILM'"&gt;fc9d1002-6c69-5cc3-808f-09269f84c901&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='MICROFORM'"&gt;4aeac8b9-5347-55dc-b30f-7707881dc82e&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='NEW_BOOKS'"&gt;481ae855-b9f8-56bb-818c-0f53d249965b&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='HOLDS'"&gt;0a11d360-30c6-5091-a147-ac5e1f01072b&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='PRINT_PER'"&gt;697eb1a2-53df-5241-8365-b766c159ad66&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='REFERENCE'"&gt;2f5f7355-3382-58ca-8f51-e3e67c92e8a6&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='RESERVES'"&gt;d45db2df-0d06-5fe5-b921-cac1c3380af8&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='UNASSIGNED'"&gt;7a77e0c6-52cc-5f37-a692-33e833809d7f&lt;/xsl:when&gt;&#xD;
        &lt;xsl:when test=".='DISCARD'"&gt;59d05a51-7abb-51f8-95ab-b92c55e3fa01&lt;/xsl:when&gt;&#xD;
        &lt;xsl:otherwise&gt;5ca3cfa8-6745-5634-9423-7882b3e9625d&lt;/xsl:otherwise&gt;&#xD;
      &lt;/xsl:choose&gt;&#xD;
    &lt;/permanentLocationId&gt;&#xD;
  &lt;/xsl:template&gt;&#xD;
&#xD;
  &lt;!-- Set FOLIO Inventory ID for the institution --&gt;&#xD;
  &lt;xsl:template match="//institutionIdHere"&gt;&#xD;
     &lt;institutionId&gt;138f6ba4-6029-5203-884e-eacaa417901c&lt;/institutionId&gt;&#xD;
  &lt;/xsl:template&gt;&#xD;
&#xD;
&lt;/xsl:stylesheet&gt;&#xD;
</script>
                    <id>318302</id>
                    <testData></testData>
                    <testOutput></testOutput>
                </step>
                <transformation>318201</transformation>
            </stepAssociations>
            <stepAssociations>
                <id>318404</id>
                <position>4</position>
                <step xsi:type="customTransformationStep">
                    <customClass>com.indexdata.masterkey.localindices.harvest.messaging.InstanceXmlToInstanceJsonTransformerRouter</customClass>
                    <description>FOLIO Instance XML to JSON</description>
                    <enabled>true</enabled>
                    <inputFormat>XML</inputFormat>
                    <name>Instance XML to JSON</name>
                    <outputFormat>JSON</outputFormat>
                    <script></script>
                    <id>301302</id>
                    <testData></testData>
                    <testOutput></testOutput>
                    <type>custom</type>
                </step>
                <transformation>318201</transformation>
            </stepAssociations>
            <id>318201</id>
        </transformation>
        <untilDate>2021-02-08T18:08:32.552Z</untilDate>
        <usedBy></usedBy>
        <clearRtOnError>false</clearRtOnError>
        <dateFormat>yyyy-MM-dd'T'hh:mm:ss'Z'</dateFormat>
        <keepPartial>true</keepPartial>
        <metadataPrefix>marc21</metadataPrefix>
        <oaiSetName>PALCI_RESHARE</oaiSetName>
        <resumptionToken></resumptionToken>
        <url>https://na02.alma.exlibrisgroup.com/view/oai/01SUU_INST/request</url>
    </oaiPmh>
    <id>318502</id>
</harvestable>
