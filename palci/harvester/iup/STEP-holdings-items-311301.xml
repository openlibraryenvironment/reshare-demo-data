<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<transformationStep uri="http://harvester.folio-dev-us-east-1-1.folio-dev.indexdata.com/harvester/records/steps/311301">
    <XmlTransformStep>
        <description>Holdings and Items, IUP</description>
        <enabled>true</enabled>
        <inputFormat>XML</inputFormat>
        <name>Holdings and Items, IUP</name>
        <outputFormat>XML</outputFormat>
        <script>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#xD;
&lt;xsl:stylesheet&#xD;
  version="1.0"&#xD;
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&#xD;
  xmlns:marc="http://www.loc.gov/MARC21/slim"&#xD;
  xmlns:oai20="http://www.openarchives.org/OAI/2.0/"&#xD;
  &gt;&#xD;
&#xD;
  &lt;xsl:strip-space elements="*"/&gt;&#xD;
  &lt;xsl:output indent="yes" method="xml" version="1.0" encoding="UTF-8"/&gt;&#xD;
&#xD;
  &lt;xsl:template match="collection"&gt;&#xD;
    &lt;collection&gt;&#xD;
        &lt;xsl:apply-templates/&gt;&#xD;
    &lt;/collection&gt;&#xD;
  &lt;/xsl:template&gt;&#xD;
&#xD;
  &lt;xsl:template match="record"&gt;&#xD;
    &lt;record&gt;&#xD;
        &lt;xsl:for-each select="@* | node()"&gt;&#xD;
            &lt;xsl:copy-of select="."/&gt;&#xD;
        &lt;/xsl:for-each&gt;&#xD;
        &lt;xsl:apply-templates/&gt;&#xD;
    &lt;/record&gt;&#xD;
  &lt;/xsl:template&gt;&#xD;
&#xD;
  &lt;xsl:variable name="WILL_LEND"&gt;46970b40-918e-47a4-a45d-b1677a2d3d46&lt;/xsl:variable&gt; &lt;!-- FOLIO Inventory ILL Policy value 'Will lend' --&gt;&#xD;
  &lt;xsl:variable name="WILL_NOT_LEND"&gt;b0f97013-87f5-4bab-87f2-ac4a5191b489&lt;/xsl:variable&gt; &lt;!-- FOLIO Inventory ILL Policy value 'Will not lend' --&gt;&#xD;
&#xD;
  &lt;xsl:variable name="CNTYPE_DEWEY"&gt;03dd64d0-5626-4ecd-8ece-4531e0069f35&lt;/xsl:variable&gt; &lt;!-- Call number type: Dewey Decimal Classification  --&gt;&#xD;
  &lt;xsl:variable name="CNTYPE_LOC"&gt;95467209-6d7b-468b-94df-0f5d7ad2747d&lt;/xsl:variable&gt; &lt;!-- Call number type: LOC  --&gt;&#xD;
  &lt;xsl:variable name="CNTYPE_OTHER"&gt;6caca63e-5651-4db6-9247-3205156e9699&lt;/xsl:variable&gt; &lt;!-- Call number type: Other (catch unmapped)  --&gt;&#xD;
  &lt;xsl:variable name="CNTYPE_SUDOC"&gt;fc388041-6cd0-4806-8a74-ebe3b9ab4c6e&lt;/xsl:variable&gt; &lt;!-- Call number type: Other (catch unmapped)  --&gt;&#xD;
&#xD;
  &lt;xsl:template match="//marc:record"&gt;&#xD;
    &lt;holdingsRecords&gt;&#xD;
        &lt;xsl:choose&gt;&#xD;
            &lt;xsl:when test="marc:datafield[@tag='900' and @ind1!='4' and @ind1!=' ']"&gt;        &#xD;
                &lt;arr&gt;&#xD;
                    &lt;xsl:for-each select="marc:datafield[@tag='900' and @ind1!='4' and @ind1!=' ']"&gt;&#xD;
                    &lt;xsl:variable name="holdingsId" select="marc:subfield[@code='8']"/&gt;&#xD;
                    &#xD;
                    &lt;i&gt;&#xD;
                        &lt;formerIds&gt;&#xD;
                        &lt;arr&gt;&#xD;
                            &lt;i&gt;&#xD;
                                &lt;xsl:value-of select="marc:subfield[@code='8']"/&gt;&#xD;
                            &lt;/i&gt;&#xD;
                        &lt;/arr&gt;&#xD;
                        &lt;/formerIds&gt;&#xD;
                        &lt;xsl:variable name="LOC" select="marc:subfield[@code='c']" /&gt;&#xD;
                        &lt;illPolicyId&gt;&#xD;
                             &lt;xsl:choose&gt;&#xD;
                               &lt;xsl:when test="$LOC='SHAFER'"&gt;&lt;xsl:value-of select="$WILL_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='PZII'"&gt;&lt;xsl:value-of select="$WILL_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='PZIT'"&gt;&lt;xsl:value-of select="$WILL_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='PZI0'"&gt;&lt;xsl:value-of select="$WILL_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='PZI1'"&gt;&lt;xsl:value-of select="$WILL_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='PZI2'"&gt;&lt;xsl:value-of select="$WILL_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='GNOV'"&gt;&lt;xsl:value-of select="$WILL_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='ETD'"&gt;&lt;xsl:value-of select="$WILL_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='PZIQ'"&gt;&lt;xsl:value-of select="$WILL_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='CIRCMUSIC'"&gt;&lt;xsl:value-of select="$WILL_NOT_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='LDC'"&gt;&lt;xsl:value-of select="$WILL_NOT_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='LDN'"&gt;&lt;xsl:value-of select="$WILL_NOT_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='MUSRES'"&gt;&lt;xsl:value-of select="$WILL_NOT_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='UNASSIGNED'"&gt;&lt;xsl:value-of select="$WILL_NOT_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='PZISer'"&gt;&lt;xsl:value-of select="$WILL_NOT_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='PZI0'"&gt;&lt;xsl:value-of select="$WILL_NOT_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='PZI9'"&gt;&lt;xsl:value-of select="$WILL_NOT_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='PZI4'"&gt;&lt;xsl:value-of select="$WILL_NOT_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='CIRMEDIA'"&gt;&lt;xsl:value-of select="$WILL_NOT_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='DEAN'"&gt;&lt;xsl:value-of select="$WILL_NOT_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='SPECCOLL'"&gt;&lt;xsl:value-of select="$WILL_NOT_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='NPC'"&gt;&lt;xsl:value-of select="$WILL_NOT_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='PXYRES'"&gt;&lt;xsl:value-of select="$WILL_NOT_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='PZI5'"&gt;&lt;xsl:value-of select="$WILL_NOT_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='PZI6'"&gt;&lt;xsl:value-of select="$WILL_NOT_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='ILL'"&gt;&lt;xsl:value-of select="$WILL_NOT_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='IN_RS_REQ'"&gt;&lt;xsl:value-of select="$WILL_NOT_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='None'"&gt;&lt;xsl:value-of select="$WILL_NOT_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='OUT_RS_REQ'"&gt;&lt;xsl:value-of select="$WILL_NOT_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:when test="$LOC='ResourceLocated'"&gt;&lt;xsl:value-of select="$WILL_NOT_LEND" /&gt;&lt;/xsl:when&gt;&#xD;
                               &lt;xsl:otherwise&gt;&lt;xsl:value-of select="$WILL_NOT_LEND" /&gt;&lt;/xsl:otherwise&gt;&#xD;
                             &lt;/xsl:choose&gt;&#xD;
                        &lt;/illPolicyId&gt;&#xD;
&#xD;
                        &lt;permanentLocationIdHere&gt;&lt;xsl:value-of select="$LOC"/&gt;&lt;/permanentLocationIdHere&gt;&#xD;
                        &lt;callNumber&gt;&#xD;
                        &lt;xsl:for-each select="marc:subfield[@code='f']"&gt;&#xD;
                            &lt;xsl:if test="position() &gt; 1"&gt;&#xD;
                            &lt;xsl:text&gt; &lt;/xsl:text&gt;&#xD;
                            &lt;/xsl:if&gt;&#xD;
                            &lt;xsl:value-of select="."/&gt;&#xD;
                        &lt;/xsl:for-each&gt;&#xD;
                        &lt;/callNumber&gt;&#xD;
&#xD;
                        &lt;xsl:for-each select="../marc:datafield[@tag='995']"&gt;&#xD;
                           &lt;xsl:if test="marc:subfield[@code='ff']=$holdingsId"&gt;&#xD;
                              &lt;callNumberTypeId&gt;&#xD;
                                &lt;xsl:variable name="CNTYPE" select="marc:subfield[@code='j']" /&gt;&#xD;
                                &lt;xsl:choose&gt;&#xD;
                                  &lt;xsl:when test="$CNTYPE='0'"&gt;&lt;xsl:value-of select="$CNTYPE_LOC" /&gt;&lt;/xsl:when&gt;&#xD;
                                  &lt;xsl:when test="$CNTYPE='1'"&gt;&lt;xsl:value-of select="$CNTYPE_DEWEY" /&gt;&lt;/xsl:when&gt;&#xD;
                                  &lt;xsl:when test="$CNTYPE='3'"&gt;&lt;xsl:value-of select="$CNTYPE_SUDOC" /&gt;&lt;/xsl:when&gt;&#xD;
                                  &lt;xsl:when test="$CNTYPE='8'"&gt;&lt;xsl:value-of select="$CNTYPE_OTHER" /&gt;&lt;/xsl:when&gt;&#xD;
                                &lt;/xsl:choose&gt;&#xD;
                              &lt;/callNumberTypeId&gt;&#xD;
                           &lt;/xsl:if&gt;&#xD;
                        &lt;/xsl:for-each&gt;&#xD;
                        &lt;items&gt;&#xD;
                        &lt;arr&gt;&#xD;
                            &lt;xsl:for-each select="../marc:datafield[@tag='995']"&gt;&#xD;
                            &lt;xsl:if test="marc:subfield[@code='ff']=$holdingsId"&gt;&#xD;
                                &lt;i&gt;&#xD;
                                &lt;itemIdentifier&gt;&#xD;
                                    &lt;xsl:value-of select="marc:subfield[@code='a']"/&gt;&#xD;
                                &lt;/itemIdentifier&gt;&#xD;
                                &lt;barcode&gt;&#xD;
                                    &lt;xsl:value-of select="marc:subfield[@code='s']"/&gt;&#xD;
                                &lt;/barcode&gt;&#xD;
                                &lt;permanentLoanTypeId&gt;2b94c631-fca9-4892-a730-03ee529ffe27&lt;/permanentLoanTypeId&gt;                    &lt;!-- Can circulate --&gt;&#xD;
                                &lt;materialTypeId&gt;&#xD;
                                    &lt;!-- Mappings to ReShare specific material types, taken from OCLC table "Type of Record" --&gt;&#xD;
                                    &lt;xsl:choose&gt;&#xD;
                                    &lt;xsl:when test="marc:subfield[@code='t']='BOOK'"      &gt;e65ed344-a691-4f8f-8446-3c0a346c6882&lt;/xsl:when&gt; &lt;!-- BKS --&gt;&#xD;
                                    &lt;xsl:when test="marc:subfield[@code='t']='ELEC'"      &gt;22cb5b81-2056-46ed-8050-c5d8f01caf90&lt;/xsl:when&gt; &lt;!-- COM --&gt;&#xD;
                                    &lt;xsl:when test="marc:subfield[@code='t']='ISSUE'"     &gt;191da404-dec2-4977-9770-1443d9d6c238&lt;/xsl:when&gt; &lt;!-- CNR --&gt;&#xD;
                                    &lt;xsl:when test="marc:subfield[@code='t']='MANUSCRIPT'"&gt;e65ed344-a691-4f8f-8446-3c0a346c6882&lt;/xsl:when&gt; &lt;!-- BKS --&gt;&#xD;
                                    &lt;xsl:when test="marc:subfield[@code='t']='MAP'"       &gt;9f2c8d85-97e6-4722-a67c-bb51ccfb7781&lt;/xsl:when&gt; &lt;!-- MAP --&gt;&#xD;
                                    &lt;xsl:when test="marc:subfield[@code='t']='OTHER'"     &gt;04858422-c46f-4041-94fc-f5c5a6b98319&lt;/xsl:when&gt; &lt;!-- Other --&gt;&#xD;
                                    &lt;xsl:when test="marc:subfield[@code='t']='SCORE'"     &gt;e5578a7e-49b9-4859-a86a-21b812215b4f&lt;/xsl:when&gt; &lt;!-- SCO --&gt;&#xD;
                                    &lt;xsl:when test="marc:subfield[@code='t']='RECORD'"    &gt;d8dc9046-a9f4-4789-adf5-678fd855b016&lt;/xsl:when&gt; &lt;!-- REC --&gt;&#xD;
                                    &lt;xsl:when test="marc:subfield[@code='t']='DVD'"       &gt;14f1845d-2fad-4091-80c8-48614eaea40b&lt;/xsl:when&gt; &lt;!-- VIS --&gt;&#xD;
                                    &lt;xsl:otherwise&gt;f6dd0721-5d4a-439e-9205-c71aef39d15b&lt;/xsl:otherwise&gt;                                    &lt;!-- Unmapped --&gt;&#xD;
                                    &lt;/xsl:choose&gt;&#xD;
                                &lt;/materialTypeId&gt;&#xD;
                                &lt;status&gt;&#xD;
                                  &lt;name&gt;Unknown&lt;/name&gt;&#xD;
                                &lt;/status&gt;&#xD;
                                &lt;enumeration&gt;&#xD;
                                  &lt;xsl:choose&gt;&#xD;
                                    &lt;xsl:when test="marc:subfield[@code='w']"&gt;&lt;xsl:value-of select="concat(marc:subfield[@code='e'], ' ', marc:subfield[@code='w'])"/&gt;&lt;/xsl:when&gt;&#xD;
                                    &lt;xsl:otherwise&gt;&lt;xsl:value-of select="marc:subfield[@code='e']"/&gt;&lt;/xsl:otherwise&gt;&#xD;
                                  &lt;/xsl:choose&gt;&#xD;
                                &lt;/enumeration&gt;&#xD;
                                &lt;chronology&gt;&#xD;
                                  &lt;xsl:choose&gt;&#xD;
                                    &lt;xsl:when test="marc:subfield[@code='x']"&gt;&lt;xsl:value-of select="concat(marc:subfield[@code='f'], ' ', marc:subfield[@code='x'])"/&gt;&lt;/xsl:when&gt;&#xD;
                                    &lt;xsl:otherwise&gt;&lt;xsl:value-of select="marc:subfield[@code='f']"/&gt;&lt;/xsl:otherwise&gt;&#xD;
                                  &lt;/xsl:choose&gt;&#xD;
                                &lt;/chronology&gt;                  &#xD;
                                &lt;/i&gt;&#xD;
                            &lt;/xsl:if&gt;&#xD;
                            &lt;/xsl:for-each&gt;&#xD;
                        &lt;/arr&gt;&#xD;
                        &lt;/items&gt;&#xD;
                    &lt;/i&gt;&#xD;
                    &lt;/xsl:for-each&gt;&#xD;
                &lt;/arr&gt;&#xD;
            &lt;/xsl:when&gt;&#xD;
            &lt;xsl:otherwise&gt;&#xD;
                &lt;arr&gt;&#xD;
                    &lt;i&gt;&#xD;
                    &lt;permanentLocationIdHere/&gt;&#xD;
                    &lt;/i&gt;&#xD;
                &lt;/arr&gt;&#xD;
            &lt;/xsl:otherwise&gt;&#xD;
        &lt;/xsl:choose&gt;&#xD;
    &lt;/holdingsRecords&gt;&#xD;
  &lt;/xsl:template&gt;&#xD;
  &lt;xsl:template match="text()"/&gt;&#xD;
&lt;/xsl:stylesheet&gt;&#xD;
</script>
        <id>311301</id>
        <testData>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#xD;
&lt;collection xmlns:marc="http://www.loc.gov/MARC21/slim" xmlns:oai20="http://www.openarchives.org/OAI/2.0/"&gt;&#xD;
  &lt;record&gt;&#xD;
    &lt;original&gt;&#xD;
      &lt;record xmlns="http://www.openarchives.org/OAI/2.0/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.openarchives.org/OAI/2.0/ http://www.openarchives.org/OAI/2.0/OAI-PMH.xsd"&gt;&#xD;
      &lt;header&gt;&#xD;
        &lt;identifier&gt;oai:alma.01SSHELCO_IUP:9963605003564&lt;/identifier&gt;&#xD;
        &lt;datestamp&gt;2020-12-21T21:10:44Z&lt;/datestamp&gt;&#xD;
        &lt;setSpec&gt;OAI_Definition&lt;/setSpec&gt;&#xD;
      &lt;/header&gt;&#xD;
      &lt;metadata&gt;&#xD;
        &lt;record xmlns="http://www.loc.gov/MARC21/slim" xsi:schemaLocation="http://www.loc.gov/MARC21/slim http://www.loc.gov/standards/marcxml/schema/MARC21slim.xsd"&gt;&#xD;
          &lt;leader&gt;00592nam a2200217I  4500&lt;/leader&gt;&#xD;
          &lt;controlfield tag="008"&gt;721114|1964|||||||          |||||||eng|u&lt;/controlfield&gt;&#xD;
          &lt;controlfield tag="001"&gt;9963605003564&lt;/controlfield&gt;&#xD;
          &lt;datafield ind1=" " ind2=" " tag="010"&gt;&#xD;
            &lt;subfield code="a"&gt;   64021776&lt;/subfield&gt;&#xD;
          &lt;/datafield&gt;&#xD;
          &lt;datafield ind1=" " ind2=" " tag="035"&gt;&#xD;
            &lt;subfield code="a"&gt;ocl70494185&lt;/subfield&gt;&#xD;
          &lt;/datafield&gt;&#xD;
          &lt;datafield ind1=" " ind2=" " tag="035"&gt;&#xD;
            &lt;subfield code="a"&gt;(PInU)6360-iupdb&lt;/subfield&gt;&#xD;
          &lt;/datafield&gt;&#xD;
          &lt;datafield ind1=" " ind2=" " tag="040"&gt;&#xD;
            &lt;subfield code="c"&gt;WSU&lt;/subfield&gt;&#xD;
            &lt;subfield code="d"&gt;PZI&lt;/subfield&gt;&#xD;
          &lt;/datafield&gt;&#xD;
          &lt;datafield ind1="1" ind2=" " tag="041"&gt;&#xD;
            &lt;subfield code="a"&gt;engspa&lt;/subfield&gt;&#xD;
          &lt;/datafield&gt;&#xD;
          &lt;datafield ind1="|" ind2="|" tag="049"&gt;&#xD;
            &lt;subfield code="a"&gt;PZIM&lt;/subfield&gt;&#xD;
            &lt;subfield code="c"&gt;1&lt;/subfield&gt;&#xD;
            &lt;subfield code="z"&gt;000002754758&lt;/subfield&gt;&#xD;
          &lt;/datafield&gt;&#xD;
          &lt;datafield ind1=" " ind2=" " tag="090"&gt;&#xD;
            &lt;subfield code="a"&gt;F1208&lt;/subfield&gt;&#xD;
            &lt;subfield code="b"&gt;.R48&lt;/subfield&gt;&#xD;
          &lt;/datafield&gt;&#xD;
          &lt;datafield ind1=" " ind2=" " tag="092"&gt;&#xD;
            &lt;subfield code="a"&gt;972&lt;/subfield&gt;&#xD;
            &lt;subfield code="b"&gt;R33&lt;/subfield&gt;&#xD;
          &lt;/datafield&gt;&#xD;
          &lt;datafield ind1="1" ind2="0" tag="100"&gt;&#xD;
            &lt;subfield code="a"&gt;Reyes, Alfonso,&lt;/subfield&gt;&#xD;
            &lt;subfield code="d"&gt;1889-1959.&lt;/subfield&gt;&#xD;
          &lt;/datafield&gt;&#xD;
          &lt;datafield ind1="1" ind2="0" tag="245"&gt;&#xD;
            &lt;subfield code="a"&gt;Mexico in a nutshell, and other essay.&lt;/subfield&gt;&#xD;
          &lt;/datafield&gt;&#xD;
          &lt;datafield ind1="0" ind2=" " tag="260"&gt;&#xD;
            &lt;subfield code="a"&gt;Berkeley,&lt;/subfield&gt;&#xD;
            &lt;subfield code="b"&gt;University of California Press,&lt;/subfield&gt;&#xD;
            &lt;subfield code="c"&gt;1964.&lt;/subfield&gt;&#xD;
          &lt;/datafield&gt;&#xD;
          &lt;datafield ind1=" " ind2=" " tag="300"&gt;&#xD;
            &lt;subfield code="a"&gt;145 p.&lt;/subfield&gt;&#xD;
          &lt;/datafield&gt;&#xD;
          &lt;datafield ind1=" " ind2=" " tag="590"&gt;&#xD;
            &lt;subfield code="a"&gt;c.1&lt;/subfield&gt;&#xD;
          &lt;/datafield&gt;&#xD;
          &lt;datafield ind1=" " ind2="0" tag="651"&gt;&#xD;
            &lt;subfield code="a"&gt;Mexico&lt;/subfield&gt;&#xD;
            &lt;subfield code="x"&gt;History.&lt;/subfield&gt;&#xD;
          &lt;/datafield&gt;&#xD;
          &lt;datafield ind1=" " ind2="0" tag="651"&gt;&#xD;
            &lt;subfield code="a"&gt;America&lt;/subfield&gt;&#xD;
            &lt;subfield code="x"&gt;Discovery and exploration.&lt;/subfield&gt;&#xD;
          &lt;/datafield&gt;&#xD;
          &lt;datafield ind1="0" ind2=" " tag="900"&gt;&#xD;
            &lt;subfield code="b"&gt;STAPLETON&lt;/subfield&gt;&#xD;
            &lt;subfield code="f"&gt;F1208&lt;/subfield&gt;&#xD;
            &lt;subfield code="f"&gt;.R48&lt;/subfield&gt;&#xD;
            &lt;subfield code="c"&gt;PZII&lt;/subfield&gt;&#xD;
            &lt;subfield code="8"&gt;22152804470003564&lt;/subfield&gt;&#xD;
          &lt;/datafield&gt;&#xD;
          &lt;datafield ind1=" " ind2=" " tag="995"&gt;&#xD;
            &lt;subfield code="ff"&gt;22152804470003564&lt;/subfield&gt;&#xD;
            &lt;subfield code="u"&gt;1&lt;/subfield&gt;&#xD;
            &lt;subfield code="j"&gt;0&lt;/subfield&gt;&#xD;
            &lt;subfield code="aa"&gt;PZII&lt;/subfield&gt;&#xD;
            &lt;subfield code="t"&gt;BOOK&lt;/subfield&gt;&#xD;
            &lt;subfield code="s"&gt;000002754758&lt;/subfield&gt;&#xD;
            &lt;subfield code="z"&gt;PZII&lt;/subfield&gt;&#xD;
            &lt;subfield code="q"&gt;ON_RESERVE: N | RESERVE_CHARGES: 0 | RECALLS_PLACED: 0 | HOLDS_PLACED: 0 | HISTORICAL_BOOKINGS: 0 | SHORT_LOAN_CHARGES: 0 | &lt;/subfield&gt;&#xD;
            &lt;subfield code="a"&gt;23152804460003564&lt;/subfield&gt;&#xD;
            &lt;subfield code="c"&gt;bo&lt;/subfield&gt;&#xD;
            &lt;subfield code="bb"&gt;F1208 .R48&lt;/subfield&gt;&#xD;
            &lt;subfield code="v"&gt;false&lt;/subfield&gt;&#xD;
            &lt;subfield code="b"&gt;1&lt;/subfield&gt;&#xD;
            &lt;subfield code="h"&gt;STAPLETON&lt;/subfield&gt;&#xD;
            &lt;subfield code="i"&gt;STAPLETON&lt;/subfield&gt;&#xD;
          &lt;/datafield&gt;&#xD;
        &lt;/record&gt;&#xD;
      &lt;/metadata&gt;&#xD;
    &lt;/record&gt;&#xD;
    &lt;/original&gt;&#xD;
    &lt;institutionIdHere/&gt;&#xD;
    &lt;localIdentifier&gt;9963605003564&lt;/localIdentifier&gt;&#xD;
    &lt;instance&gt;&#xD;
      &lt;source&gt;MARC&lt;/source&gt;&#xD;
      &lt;instanceTypeId&gt;6312d172-f0cf-40f6-b27d-9fa8feaf332f&lt;/instanceTypeId&gt;&#xD;
      &lt;identifiers&gt;&#xD;
        &lt;arr&gt;&#xD;
          &lt;i&gt;&#xD;
            &lt;value&gt;9963605003564&lt;/value&gt;&#xD;
            &lt;identifierTypeIdHere/&gt;&#xD;
          &lt;/i&gt;&#xD;
          &lt;i&gt;&#xD;
            &lt;value&gt;   64021776&lt;/value&gt;&#xD;
            &lt;identifierTypeId&gt;c858e4f2-2b6b-4385-842b-60732ee14abb&lt;/identifierTypeId&gt;&#xD;
          &lt;/i&gt;&#xD;
          &lt;i&gt;&#xD;
            &lt;value&gt;ocl70494185&lt;/value&gt;&#xD;
            &lt;identifierTypeId&gt;7e591197-f335-4afb-bc6d-a6d76ca3bace&lt;/identifierTypeId&gt;&#xD;
          &lt;/i&gt;&#xD;
          &lt;i&gt;&#xD;
            &lt;value&gt;(PInU)6360-iupdb&lt;/value&gt;&#xD;
            &lt;identifierTypeId&gt;7e591197-f335-4afb-bc6d-a6d76ca3bace&lt;/identifierTypeId&gt;&#xD;
          &lt;/i&gt;&#xD;
        &lt;/arr&gt;&#xD;
      &lt;/identifiers&gt;&#xD;
      &lt;classifications&gt;&#xD;
        &lt;arr&gt;&#xD;
          &lt;i/&gt;&#xD;
        &lt;/arr&gt;&#xD;
      &lt;/classifications&gt;&#xD;
      &lt;title&gt;Mexico in a nutshell, and other essay&lt;/title&gt;&#xD;
      &lt;contributors&gt;&#xD;
        &lt;arr&gt;&#xD;
          &lt;i&gt;&#xD;
            &lt;name&gt;Reyes, Alfonso, 1889-1959&lt;/name&gt;&#xD;
            &lt;contributorNameTypeId&gt;2b94c631-fca9-4892-a730-03ee529ffe2a&lt;/contributorNameTypeId&gt;&#xD;
            &lt;primary&gt;true&lt;/primary&gt;&#xD;
          &lt;/i&gt;&#xD;
        &lt;/arr&gt;&#xD;
      &lt;/contributors&gt;&#xD;
      &lt;publication&gt;&#xD;
        &lt;arr&gt;&#xD;
          &lt;i&gt;&#xD;
            &lt;publisher&gt;University of California Press,&lt;/publisher&gt;&#xD;
            &lt;place&gt;Berkeley,&lt;/place&gt;&#xD;
            &lt;dateOfPublication&gt;1964.&lt;/dateOfPublication&gt;&#xD;
          &lt;/i&gt;&#xD;
        &lt;/arr&gt;&#xD;
      &lt;/publication&gt;&#xD;
      &lt;physicalDescriptions&gt;&#xD;
        &lt;arr&gt;&#xD;
          &lt;i&gt;145 p&lt;/i&gt;&#xD;
        &lt;/arr&gt;&#xD;
      &lt;/physicalDescriptions&gt;&#xD;
      &lt;subjects&gt;&#xD;
        &lt;arr&gt;&#xD;
          &lt;i&gt;Mexico&lt;/i&gt;&#xD;
          &lt;i&gt;America&lt;/i&gt;&#xD;
        &lt;/arr&gt;&#xD;
      &lt;/subjects&gt;&#xD;
    &lt;/instance&gt;&#xD;
    &lt;matchKey&gt;&#xD;
      &lt;title&gt;Mexico in a nutshell, and other essay&lt;/title&gt;&#xD;
      &lt;remainder-of-title&gt; : &lt;/remainder-of-title&gt;&#xD;
      &lt;medium/&gt;&#xD;
    &lt;/matchKey&gt;&#xD;
  &lt;/record&gt;&#xD;
&lt;/collection&gt;&#xD;
</testData>
        <testOutput>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#xD;
&lt;collection xmlns:marc="http://www.loc.gov/MARC21/slim"&#xD;
            xmlns:oai20="http://www.openarchives.org/OAI/2.0/"&gt;&#xD;
   &lt;record&gt;&#xD;
      &lt;original&gt;&#xD;
         &lt;record xmlns="http://www.openarchives.org/OAI/2.0/"&#xD;
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&#xD;
                 xsi:schemaLocation="http://www.openarchives.org/OAI/2.0/ http://www.openarchives.org/OAI/2.0/OAI-PMH.xsd"&gt;&#xD;
            &lt;header&gt;&#xD;
               &lt;identifier&gt;oai:alma.01SSHELCO_IUP:9963605003564&lt;/identifier&gt;&#xD;
               &lt;datestamp&gt;2020-12-21T21:10:44Z&lt;/datestamp&gt;&#xD;
               &lt;setSpec&gt;OAI_Definition&lt;/setSpec&gt;&#xD;
            &lt;/header&gt;&#xD;
            &lt;metadata&gt;&#xD;
               &lt;record xmlns="http://www.loc.gov/MARC21/slim"&#xD;
                       xsi:schemaLocation="http://www.loc.gov/MARC21/slim http://www.loc.gov/standards/marcxml/schema/MARC21slim.xsd"&gt;&#xD;
                  &lt;leader&gt;00592nam a2200217I  4500&lt;/leader&gt;&#xD;
                  &lt;controlfield tag="008"&gt;721114|1964|||||||          |||||||eng|u&lt;/controlfield&gt;&#xD;
                  &lt;controlfield tag="001"&gt;9963605003564&lt;/controlfield&gt;&#xD;
                  &lt;datafield ind1=" " ind2=" " tag="010"&gt;&#xD;
                     &lt;subfield code="a"&gt;   64021776&lt;/subfield&gt;&#xD;
                  &lt;/datafield&gt;&#xD;
                  &lt;datafield ind1=" " ind2=" " tag="035"&gt;&#xD;
                     &lt;subfield code="a"&gt;ocl70494185&lt;/subfield&gt;&#xD;
                  &lt;/datafield&gt;&#xD;
                  &lt;datafield ind1=" " ind2=" " tag="035"&gt;&#xD;
                     &lt;subfield code="a"&gt;(PInU)6360-iupdb&lt;/subfield&gt;&#xD;
                  &lt;/datafield&gt;&#xD;
                  &lt;datafield ind1=" " ind2=" " tag="040"&gt;&#xD;
                     &lt;subfield code="c"&gt;WSU&lt;/subfield&gt;&#xD;
                     &lt;subfield code="d"&gt;PZI&lt;/subfield&gt;&#xD;
                  &lt;/datafield&gt;&#xD;
                  &lt;datafield ind1="1" ind2=" " tag="041"&gt;&#xD;
                     &lt;subfield code="a"&gt;engspa&lt;/subfield&gt;&#xD;
                  &lt;/datafield&gt;&#xD;
                  &lt;datafield ind1="|" ind2="|" tag="049"&gt;&#xD;
                     &lt;subfield code="a"&gt;PZIM&lt;/subfield&gt;&#xD;
                     &lt;subfield code="c"&gt;1&lt;/subfield&gt;&#xD;
                     &lt;subfield code="z"&gt;000002754758&lt;/subfield&gt;&#xD;
                  &lt;/datafield&gt;&#xD;
                  &lt;datafield ind1=" " ind2=" " tag="090"&gt;&#xD;
                     &lt;subfield code="a"&gt;F1208&lt;/subfield&gt;&#xD;
                     &lt;subfield code="b"&gt;.R48&lt;/subfield&gt;&#xD;
                  &lt;/datafield&gt;&#xD;
                  &lt;datafield ind1=" " ind2=" " tag="092"&gt;&#xD;
                     &lt;subfield code="a"&gt;972&lt;/subfield&gt;&#xD;
                     &lt;subfield code="b"&gt;R33&lt;/subfield&gt;&#xD;
                  &lt;/datafield&gt;&#xD;
                  &lt;datafield ind1="1" ind2="0" tag="100"&gt;&#xD;
                     &lt;subfield code="a"&gt;Reyes, Alfonso,&lt;/subfield&gt;&#xD;
                     &lt;subfield code="d"&gt;1889-1959.&lt;/subfield&gt;&#xD;
                  &lt;/datafield&gt;&#xD;
                  &lt;datafield ind1="1" ind2="0" tag="245"&gt;&#xD;
                     &lt;subfield code="a"&gt;Mexico in a nutshell, and other essay.&lt;/subfield&gt;&#xD;
                  &lt;/datafield&gt;&#xD;
                  &lt;datafield ind1="0" ind2=" " tag="260"&gt;&#xD;
                     &lt;subfield code="a"&gt;Berkeley,&lt;/subfield&gt;&#xD;
                     &lt;subfield code="b"&gt;University of California Press,&lt;/subfield&gt;&#xD;
                     &lt;subfield code="c"&gt;1964.&lt;/subfield&gt;&#xD;
                  &lt;/datafield&gt;&#xD;
                  &lt;datafield ind1=" " ind2=" " tag="300"&gt;&#xD;
                     &lt;subfield code="a"&gt;145 p.&lt;/subfield&gt;&#xD;
                  &lt;/datafield&gt;&#xD;
                  &lt;datafield ind1=" " ind2=" " tag="590"&gt;&#xD;
                     &lt;subfield code="a"&gt;c.1&lt;/subfield&gt;&#xD;
                  &lt;/datafield&gt;&#xD;
                  &lt;datafield ind1=" " ind2="0" tag="651"&gt;&#xD;
                     &lt;subfield code="a"&gt;Mexico&lt;/subfield&gt;&#xD;
                     &lt;subfield code="x"&gt;History.&lt;/subfield&gt;&#xD;
                  &lt;/datafield&gt;&#xD;
                  &lt;datafield ind1=" " ind2="0" tag="651"&gt;&#xD;
                     &lt;subfield code="a"&gt;America&lt;/subfield&gt;&#xD;
                     &lt;subfield code="x"&gt;Discovery and exploration.&lt;/subfield&gt;&#xD;
                  &lt;/datafield&gt;&#xD;
                  &lt;datafield ind1="0" ind2=" " tag="900"&gt;&#xD;
                     &lt;subfield code="b"&gt;STAPLETON&lt;/subfield&gt;&#xD;
                     &lt;subfield code="f"&gt;F1208&lt;/subfield&gt;&#xD;
                     &lt;subfield code="f"&gt;.R48&lt;/subfield&gt;&#xD;
                     &lt;subfield code="c"&gt;PZIIXX&lt;/subfield&gt;&#xD;
                     &lt;subfield code="8"&gt;22152804470003564&lt;/subfield&gt;&#xD;
                  &lt;/datafield&gt;&#xD;
                  &lt;datafield ind1=" " ind2=" " tag="995"&gt;&#xD;
                     &lt;subfield code="ff"&gt;22152804470003564&lt;/subfield&gt;&#xD;
                     &lt;subfield code="u"&gt;1&lt;/subfield&gt;&#xD;
                     &lt;subfield code="j"&gt;0&lt;/subfield&gt;&#xD;
                     &lt;subfield code="aa"&gt;PZII&lt;/subfield&gt;&#xD;
                     &lt;subfield code="t"&gt;BOOK&lt;/subfield&gt;&#xD;
                     &lt;subfield code="s"&gt;000002754758&lt;/subfield&gt;&#xD;
                     &lt;subfield code="z"&gt;PZII&lt;/subfield&gt;&#xD;
                     &lt;subfield code="q"&gt;ON_RESERVE: N | RESERVE_CHARGES: 0 | RECALLS_PLACED: 0 | HOLDS_PLACED: 0 | HISTORICAL_BOOKINGS: 0 | SHORT_LOAN_CHARGES: 0 | &lt;/subfield&gt;&#xD;
                     &lt;subfield code="a"&gt;23152804460003564&lt;/subfield&gt;&#xD;
                     &lt;subfield code="c"&gt;bo&lt;/subfield&gt;&#xD;
                     &lt;subfield code="bb"&gt;F1208 .R48&lt;/subfield&gt;&#xD;
                     &lt;subfield code="v"&gt;false&lt;/subfield&gt;&#xD;
                     &lt;subfield code="b"&gt;1&lt;/subfield&gt;&#xD;
                     &lt;subfield code="h"&gt;STAPLETON&lt;/subfield&gt;&#xD;
                     &lt;subfield code="i"&gt;STAPLETON&lt;/subfield&gt;&#xD;
                  &lt;/datafield&gt;&#xD;
               &lt;/record&gt;&#xD;
            &lt;/metadata&gt;&#xD;
         &lt;/record&gt;&#xD;
      &lt;/original&gt;&#xD;
      &lt;institutionIdHere/&gt;&#xD;
      &lt;localIdentifier&gt;9963605003564&lt;/localIdentifier&gt;&#xD;
      &lt;instance&gt;&#xD;
         &lt;source&gt;MARC&lt;/source&gt;&#xD;
         &lt;instanceTypeId&gt;6312d172-f0cf-40f6-b27d-9fa8feaf332f&lt;/instanceTypeId&gt;&#xD;
         &lt;identifiers&gt;&#xD;
            &lt;arr&gt;&#xD;
               &lt;i&gt;&#xD;
                  &lt;value&gt;9963605003564&lt;/value&gt;&#xD;
                  &lt;identifierTypeIdHere/&gt;&#xD;
               &lt;/i&gt;&#xD;
               &lt;i&gt;&#xD;
                  &lt;value&gt;   64021776&lt;/value&gt;&#xD;
                  &lt;identifierTypeId&gt;c858e4f2-2b6b-4385-842b-60732ee14abb&lt;/identifierTypeId&gt;&#xD;
               &lt;/i&gt;&#xD;
               &lt;i&gt;&#xD;
                  &lt;value&gt;ocl70494185&lt;/value&gt;&#xD;
                  &lt;identifierTypeId&gt;7e591197-f335-4afb-bc6d-a6d76ca3bace&lt;/identifierTypeId&gt;&#xD;
               &lt;/i&gt;&#xD;
               &lt;i&gt;&#xD;
                  &lt;value&gt;(PInU)6360-iupdb&lt;/value&gt;&#xD;
                  &lt;identifierTypeId&gt;7e591197-f335-4afb-bc6d-a6d76ca3bace&lt;/identifierTypeId&gt;&#xD;
               &lt;/i&gt;&#xD;
            &lt;/arr&gt;&#xD;
         &lt;/identifiers&gt;&#xD;
         &lt;classifications&gt;&#xD;
            &lt;arr&gt;&#xD;
               &lt;i/&gt;&#xD;
            &lt;/arr&gt;&#xD;
         &lt;/classifications&gt;&#xD;
         &lt;title&gt;Mexico in a nutshell, and other essay&lt;/title&gt;&#xD;
         &lt;contributors&gt;&#xD;
            &lt;arr&gt;&#xD;
               &lt;i&gt;&#xD;
                  &lt;name&gt;Reyes, Alfonso, 1889-1959&lt;/name&gt;&#xD;
                  &lt;contributorNameTypeId&gt;2b94c631-fca9-4892-a730-03ee529ffe2a&lt;/contributorNameTypeId&gt;&#xD;
                  &lt;primary&gt;true&lt;/primary&gt;&#xD;
               &lt;/i&gt;&#xD;
            &lt;/arr&gt;&#xD;
         &lt;/contributors&gt;&#xD;
         &lt;publication&gt;&#xD;
            &lt;arr&gt;&#xD;
               &lt;i&gt;&#xD;
                  &lt;publisher&gt;University of California Press,&lt;/publisher&gt;&#xD;
                  &lt;place&gt;Berkeley,&lt;/place&gt;&#xD;
                  &lt;dateOfPublication&gt;1964.&lt;/dateOfPublication&gt;&#xD;
               &lt;/i&gt;&#xD;
            &lt;/arr&gt;&#xD;
         &lt;/publication&gt;&#xD;
         &lt;physicalDescriptions&gt;&#xD;
            &lt;arr&gt;&#xD;
               &lt;i&gt;145 p&lt;/i&gt;&#xD;
            &lt;/arr&gt;&#xD;
         &lt;/physicalDescriptions&gt;&#xD;
         &lt;subjects&gt;&#xD;
            &lt;arr&gt;&#xD;
               &lt;i&gt;Mexico&lt;/i&gt;&#xD;
               &lt;i&gt;America&lt;/i&gt;&#xD;
            &lt;/arr&gt;&#xD;
         &lt;/subjects&gt;&#xD;
      &lt;/instance&gt;&#xD;
      &lt;matchKey&gt;&#xD;
         &lt;title&gt;Mexico in a nutshell, and other essay&lt;/title&gt;&#xD;
         &lt;remainder-of-title&gt; : &lt;/remainder-of-title&gt;&#xD;
         &lt;medium/&gt;&#xD;
      &lt;/matchKey&gt;&#xD;
      &lt;holdingsRecords&gt;&#xD;
         &lt;arr&gt;&#xD;
            &lt;i&gt;&#xD;
               &lt;formerIds&gt;&#xD;
                  &lt;arr&gt;&#xD;
                     &lt;i&gt;22152804470003564&lt;/i&gt;&#xD;
                  &lt;/arr&gt;&#xD;
               &lt;/formerIds&gt;&#xD;
               &lt;illPolicyId&gt;b0f97013-87f5-4bab-87f2-ac4a5191b489&lt;/illPolicyId&gt;&#xD;
               &lt;permanentLocationIdHere&gt;PZIIXX&lt;/permanentLocationIdHere&gt;&#xD;
               &lt;callNumber&gt;F1208 .R48&lt;/callNumber&gt;&#xD;
               &lt;callNumberTypeId&gt;95467209-6d7b-468b-94df-0f5d7ad2747d&lt;/callNumberTypeId&gt;&#xD;
               &lt;items&gt;&#xD;
                  &lt;arr&gt;&#xD;
                     &lt;i&gt;&#xD;
                        &lt;itemIdentifier&gt;23152804460003564&lt;/itemIdentifier&gt;&#xD;
                        &lt;barcode&gt;000002754758&lt;/barcode&gt;&#xD;
                        &lt;permanentLoanTypeId&gt;2b94c631-fca9-4892-a730-03ee529ffe27&lt;/permanentLoanTypeId&gt;&#xD;
                        &lt;materialTypeId&gt;e65ed344-a691-4f8f-8446-3c0a346c6882&lt;/materialTypeId&gt;&#xD;
                        &lt;status&gt;&#xD;
                           &lt;name&gt;Unknown&lt;/name&gt;&#xD;
                        &lt;/status&gt;&#xD;
                        &lt;enumeration/&gt;&#xD;
                        &lt;chronology/&gt;&#xD;
                     &lt;/i&gt;&#xD;
                  &lt;/arr&gt;&#xD;
               &lt;/items&gt;&#xD;
            &lt;/i&gt;&#xD;
         &lt;/arr&gt;&#xD;
      &lt;/holdingsRecords&gt;&#xD;
   &lt;/record&gt;&#xD;
&lt;/collection&gt;</testOutput>
    </XmlTransformStep>
    <id>311301</id>
</transformationStep>
